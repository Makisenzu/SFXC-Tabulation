import{r as o,j as e,b as S}from"./app-B6avx_T4.js";import{G as k}from"./iconBase-D6UhnyE_.js";import{s as i}from"./Sweetalert-C-TLgqtR.js";function u(n){return k({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M12 14V22H4C4 17.5817 7.58172 14 12 14ZM12 13C8.685 13 6 10.315 6 7C6 3.685 8.685 1 12 1C15.315 1 18 3.685 18 7C18 10.315 15.315 13 12 13ZM21 17H22V22H14V17H15V16C15 14.3431 16.3431 13 18 13C19.6569 13 21 14.3431 21 16V17ZM19 17V16C19 15.4477 18.5523 15 18 15C17.4477 15 17 15.4477 17 16V17H19Z"},child:[]}]})(n)}function J({show:n,onClose:p,selectedEvent:l}){const[t,d]=o.useState(new Set),[a,j]=o.useState([]),[y,m]=o.useState(!1),[c,h]=o.useState(""),[x,b]=o.useState(!1);o.useEffect(()=>{n&&l&&v()},[n,l]);const v=async()=>{m(!0);try{const s=await fetch("/getJudges");if(s.ok){const r=await s.json();j(r.judges||[])}}catch(s){console.error("Error fetching judges:",s),i("error","Failed to load judges")}finally{m(!1)}},N=s=>{const r=new Set(t);r.has(s)?r.delete(s):r.add(s),d(r)},w=()=>{t.size===a.length?d(new Set):d(new Set(a.map(s=>s.id)))},C=()=>{if(t.size===0){i("error","Please select at least one judge");return}if(!l){i("error","No event selected");return}b(!0);const s={event_id:l.id,user_id:Array.from(t)};S.post("/assign-judge",s,{onSuccess:()=>{i("success",`${t.size} judge(s) assigned successfully!`),g()},onError:r=>{i("error","Failed to assign judges"),console.error("Error assigning judges:",r)},onFinish:()=>b(!1)})},g=()=>{p(),d(new Set),h("")},f=a.filter(s=>s.username.toLowerCase().includes(c.toLowerCase()));return!n||!l?null:e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center overflow-y-auto bg-black/50 backdrop-blur-sm",children:e.jsx("div",{className:"relative w-full max-w-3xl p-6 mx-auto",children:e.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl",children:[e.jsx("div",{className:"px-8 py-6 border-b border-gray-100",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-blue-50 rounded-xl",children:e.jsx(u,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Assign Judges to Event"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:l.event_name})]})]}),e.jsx("button",{onClick:g,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),e.jsxs("div",{className:"px-8 py-6 space-y-6",children:[a.length>0&&e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search judges...",value:c,onChange:s=>h(s.target.value),className:"w-full px-4 py-3 pl-10 bg-gray-50 border border-gray-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent focus:bg-white transition-all"}),e.jsx(u,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Select Judges"}),a.length>0&&e.jsx("button",{type:"button",onClick:w,className:"text-sm text-blue-600 hover:text-blue-700 font-medium transition-colors",children:t.size===a.length?"Deselect All":"Select All"})]}),e.jsx("div",{className:"border border-gray-200 rounded-xl overflow-hidden",children:e.jsx("div",{className:"max-h-96 overflow-y-auto",children:y?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"text-gray-500 mt-2",children:"Loading judges..."})]}):f.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c?e.jsx(AlertCircle,{className:"h-8 w-8 text-gray-400"}):e.jsx(u,{className:"h-8 w-8 text-gray-400"})}),e.jsx("p",{className:"text-gray-500 font-medium",children:c?"No judges match your search":"No judges available"})]}):e.jsx("div",{className:"divide-y divide-gray-100",children:f.map(s=>e.jsxs("label",{className:"flex items-center px-5 py-4 hover:bg-blue-50 cursor-pointer transition-colors group",children:[e.jsx("input",{type:"checkbox",checked:t.has(s.id),onChange:()=>N(s.id),className:"h-5 w-5 text-blue-600 focus:ring-2 focus:ring-blue-500 border-gray-300 rounded transition-colors"}),e.jsx("span",{className:"ml-4 text-sm font-medium text-gray-900 group-hover:text-blue-700 transition-colors",children:s.username}),e.jsxs("span",{className:"ml-auto text-xs text-gray-500 font-normal",children:["ID: ",s.id]})]},s.id))})})}),t.size>0&&e.jsx("div",{className:"mt-3 flex items-center gap-2",children:e.jsxs("div",{className:"px-3 py-1.5 bg-blue-50 text-blue-700 rounded-lg text-sm font-semibold",children:[t.size," Selected"]})})]})]}),e.jsxs("div",{className:"px-8 py-6 bg-gray-50 border-t border-gray-100 rounded-b-2xl flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:g,className:"px-6 py-3 border border-gray-300 rounded-xl text-sm font-semibold text-gray-700 hover:bg-white transition-colors",disabled:x,children:"Cancel"}),e.jsxs("button",{onClick:C,disabled:x||t.size===0,className:"px-6 py-3 bg-blue-600 text-white rounded-xl text-sm font-semibold hover:bg-blue-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl flex items-center gap-2",children:[e.jsx(u,{className:"w-4 h-4"}),x?"Assigning...":`Assign ${t.size} Judge${t.size!==1?"s":""}`]})]})]})})})}const L=Object.freeze(Object.defineProperty({__proto__:null,default:J},Symbol.toStringTag,{value:"Module"}));export{J as A,u as R,L as a};
