import{r as a,a as r,j as e}from"./app-DtBfZdBf.js";import{a as j,b as o,c as f,d as N}from"./index-BjJTAW1r.js";import w from"./ViewArchiveModal-DedYUFCo.js";import"./iconBase-CZTf4d7c.js";function S(){const[i,h]=a.useState([]),[m,n]=a.useState(!0),[p,l]=a.useState(!1),[c,d]=a.useState(null);a.useEffect(()=>{x()},[]);const x=async()=>{try{const t=await r.get("/getArchivedEvents");h(t.data),n(!1)}catch(t){console.error("Error fetching archived events:",t),n(!1)}},g=async t=>{try{const s=await r.get(`/getArchivedEventDetails/${t.id}`);d(s.data),l(!0)}catch(s){console.error("Error fetching archive details:",s);const v=s.response?.data?.message||s.response?.data?.error||"Failed to load archive details";alert(v+`

Event: `+t.event_name)}},y=async t=>{if(confirm("Are you sure you want to unarchive this event? It will be set as active again."))try{await r.post(`/unarchiveEvent/${t}`),x(),alert("Event unarchived successfully!")}catch(s){console.error("Error unarchiving event:",s),alert("Failed to unarchive event")}},u=t=>new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return m?e.jsx("div",{className:"text-center py-8",children:"Loading archived events..."}):e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(j,{className:"text-gray-600",size:24}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Archived Events"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"View past events and their complete results"})]})]})}),i.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(o,{className:"mx-auto text-gray-300 mb-4",size:64}),e.jsx("p",{className:"text-gray-500 text-lg",children:"No archived events yet"}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Events that are archived will appear here"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Event Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Medal Tally"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contestants"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Event Period"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Archived Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(o,{className:"text-gray-400 mr-2"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.event_name}),e.jsx("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:t.description})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800",children:t.event_type})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.medal_tally_name?e.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-purple-100 text-purple-800",children:t.medal_tally_name}):e.jsx("span",{className:"text-gray-400 text-xs",children:"No medal tally"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[t.contestants?.length||0," contestants"]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[e.jsx("div",{children:new Date(t.event_start).toLocaleDateString()}),e.jsxs("div",{className:"text-xs text-gray-400",children:["to ",new Date(t.event_end).toLocaleDateString()]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:u(t.updated_at)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>g(t),className:"inline-flex items-center gap-1 px-3 py-1 bg-green-100 text-green-700 rounded hover:bg-green-200",title:"View Details",children:[e.jsx(f,{size:14}),"View"]}),e.jsxs("button",{onClick:()=>y(t.id),className:"inline-flex items-center gap-1 px-3 py-1 bg-blue-100 text-blue-700 rounded hover:bg-blue-200",title:"Unarchive",children:[e.jsx(N,{size:14}),"Unarchive"]})]})})]},t.id))})]})}),p&&c&&e.jsx(w,{archiveData:c,onClose:()=>{l(!1),d(null)}})]})}export{S as default};
