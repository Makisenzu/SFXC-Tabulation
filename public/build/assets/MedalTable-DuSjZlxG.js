import{r as s,a as i,j as e}from"./app-BBXihpFN.js";import{f as j,c as w,l as N}from"./index-B93cBGD9.js";import b from"./CreateMedalTallyModal-BB2GZGeN.js";import v from"./ViewMedalTallyModal-BnAxI5u_.js";import"./iconBase-BzYg38nK.js";function E(){const[n,m]=s.useState([]),[p,d]=s.useState(!0),[h,r]=s.useState(!1),[y,c]=s.useState(!1),[o,x]=s.useState(null);s.useEffect(()=>{l()},[]);const l=async()=>{try{const t=await i.get("/getMedalTallies");m(t.data),d(!1)}catch(t){console.error("Error fetching medal tallies:",t),d(!1)}},u=async t=>{if(confirm("Are you sure you want to delete this medal tally?"))try{await i.delete(`/deleteMedalTally/${t}`),l()}catch(a){console.error("Error deleting medal tally:",a)}},g=async t=>{try{const a=await i.get(`/getMedalTally/${t.id}`);x(a.data),c(!0)}catch(a){console.error("Error fetching tally details:",a)}};return p?e.jsx("div",{className:"text-center py-8",children:"Loading medal tallies..."}):e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Medal Tally Management"}),e.jsxs("button",{onClick:()=>r(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx(j,{})," Create Medal Tally"]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tally Title"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Competitions"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Participants"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"px-6 py-4 text-center text-gray-500",children:"No medal tallies found"})}):n.map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:t.tally_title}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:e.jsx("div",{className:"flex flex-wrap gap-1",children:t.events?.map((a,f)=>e.jsx("span",{className:"inline-block px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded",children:a.event_name},f))})}),e.jsxs("td",{className:"px-6 py-4 text-sm text-gray-900",children:[t.participants?.length||0," participants"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>g(t),className:"text-green-600 hover:text-green-900",title:"View & Edit Scores",children:e.jsx(w,{size:16})}),e.jsx("button",{onClick:()=>u(t.id),className:"text-red-600 hover:text-red-900",title:"Delete",children:e.jsx(N,{size:16})})]})})]},t.id))})]})}),h&&e.jsx(b,{onClose:()=>r(!1),onSuccess:()=>{l(),r(!1)}}),y&&o&&e.jsx(v,{tally:o,onClose:()=>{c(!1),x(null)},onUpdate:()=>{l()}})]})}export{E as default};
