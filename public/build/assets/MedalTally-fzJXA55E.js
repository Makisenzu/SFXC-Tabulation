import{r as d,j as e,H as f}from"./app-DBdLfbs_.js";import{P as b}from"./PublicLayout-Bprl6fJk.js";import"./printLogo-Dw7oCvxT.js";function w({tallies:m}){const[n,h]=d.useState(m||[]),[a,o]=d.useState(null);d.useEffect(()=>{if(window.Echo)return window.Echo.channel("medal-tally-public").listen(".MedalTallyUpdated",t=>{g()}),()=>{window.Echo.leave("medal-tally-public")}},[]);const g=async()=>{try{const t=await(await fetch("/api/medal-tallies")).json();h(t)}catch(s){console.error("Error:",s)}};d.useEffect(()=>{n.length>0&&!a&&o(n[0])},[n]);const p=s=>{const t=r=>e.jsxs("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("circle",{cx:"12",cy:"15",r:"6",fill:r,stroke:"#6B7280",strokeWidth:"1.5"}),e.jsx("path",{d:"M9 9L7 2M15 9L17 2M7 2L9 2M17 2L15 2",stroke:"#6B7280",strokeWidth:"1.5",strokeLinecap:"round"})]});switch(parseInt(s)){case 3:return e.jsxs("div",{className:"inline-flex items-center gap-2",children:[t("#FFD700"),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Gold"})]});case 2:return e.jsxs("div",{className:"inline-flex items-center gap-2",children:[t("#C0C0C0"),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Silver"})]});case 1:return e.jsxs("div",{className:"inline-flex items-center gap-2",children:[t("#CD7F32"),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Bronze"})]});default:return e.jsx("span",{className:"text-sm text-gray-400",children:"-"})}},c=s=>{if(!a)return{gold:0,silver:0,bronze:0,total:0};const t=a.scores.filter(i=>i.participant_id===s),r=t.filter(i=>i.score===3).length,l=t.filter(i=>i.score===2).length,x=t.filter(i=>i.score===1).length;return{gold:r,silver:l,bronze:x,total:r+l+x}},u=()=>a?[...a.participants].sort((s,t)=>{const r=c(s.id),l=c(t.id);return l.gold!==r.gold?l.gold-r.gold:l.silver!==r.silver?l.silver-r.silver:l.bronze!==r.bronze?l.bronze-r.bronze:0}):[],j=s=>{const t=s.toUpperCase();return t.includes("CBE")?"border-l-4 border-yellow-500 bg-yellow-50":t.includes("CTE")?"border-l-4 border-blue-600 bg-blue-50":t.includes("CCJE")?"border-l-4 border-red-500 bg-red-50":"border-l-4 border-gray-300"};return e.jsxs(b,{children:[e.jsx(f,{title:"Medal Tally"}),e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-8 gap-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-semibold text-gray-900",children:"Medal Tally"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Competition standings and results"})]})}),n.length===0?e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center",children:e.jsx("p",{className:"text-gray-500",children:"No medal tally available"})}):e.jsxs(e.Fragment,{children:[n.length>1&&e.jsx("div",{className:"mb-6",children:e.jsx("select",{value:a?.id||"",onChange:s=>o(n.find(t=>t.id===parseInt(s.target.value))),className:"block w-full max-w-md px-4 py-2 bg-white border border-gray-300 rounded-lg shadow-sm focus:ring-1 focus:ring-gray-400 focus:border-gray-400",children:n.map(s=>e.jsx("option",{value:s.id,children:s.tally_title},s.id))})}),a&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden mb-8",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:a.tally_title}),e.jsxs("p",{className:"text-gray-600 mt-1",children:[a.events.length," Competitions"]})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Overall Standings"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:u().map((s,t)=>{const r=c(s.id),l=t+1;return e.jsxs("div",{className:`rounded-lg p-5 border-l-4 ${j(s.participant_name)}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-semibold text-lg",children:s.participant_name}),r.total>0&&e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-bold bg-gray-200 text-gray-700",children:["Rank ",l]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-yellow-500 text-xl",children:"ðŸ…"}),e.jsx("span",{children:"Gold"})]}),e.jsx("span",{children:r.gold})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-500 text-xl",children:"ðŸ¥ˆ"}),e.jsx("span",{children:"Silver"})]}),e.jsx("span",{children:r.silver})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-orange-600 text-xl",children:"ðŸ¥‰"}),e.jsx("span",{children:"Bronze"})]}),e.jsx("span",{children:r.bronze})]}),e.jsx("hr",{className:"my-2"}),e.jsxs("div",{className:"flex justify-between items-center font-semibold",children:[e.jsx("span",{children:"Total"}),e.jsx("span",{children:r.total})]})]})]},s.id)})})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Competition Results"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Competition"}),a.participants.map(s=>e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase tracking-wider",children:s.participant_name},s.id))]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.events.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:s.event_name}),a.participants.map(t=>{const r=a.scores.find(l=>l.event_id===s.id&&l.participant_id===t.id);return e.jsx("td",{className:"px-6 py-4 text-center",children:p(r?.score)},t.id)})]},s.id))})]})})]})]})]})]})})]})}export{w as default};
