import{r as c,j as e,H as f}from"./app-3512yRC9.js";import{P as u}from"./PublicLayout-BMlPXiaO.js";import"./printLogo-Dw7oCvxT.js";function v({tallies:m}){const[i,h]=c.useState(m||[]),[l,o]=c.useState(null);c.useEffect(()=>{if(window.Echo)return window.Echo.channel("medal-tally-public").listen(".MedalTallyUpdated",t=>{g()}),()=>{window.Echo.leave("medal-tally-public")}},[]);const g=async()=>{try{const t=await(await fetch("/api/medal-tallies")).json();h(t)}catch(s){console.error("Error:",s)}};c.useEffect(()=>{i.length>0&&!l&&o(i[0])},[i]);const p=s=>{const t=r=>e.jsxs("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("circle",{cx:"12",cy:"15",r:"6",fill:r,stroke:"#6B7280",strokeWidth:"1.5"}),e.jsx("path",{d:"M9 9L7 2M15 9L17 2M7 2L9 2M17 2L15 2",stroke:"#6B7280",strokeWidth:"1.5",strokeLinecap:"round"})]});switch(parseInt(s)){case 3:return e.jsxs("div",{className:"inline-flex items-center gap-2",children:[t("#FFD700"),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Gold"})]});case 2:return e.jsxs("div",{className:"inline-flex items-center gap-2",children:[t("#C0C0C0"),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Silver"})]});case 1:return e.jsxs("div",{className:"inline-flex items-center gap-2",children:[t("#CD7F32"),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Bronze"})]});default:return e.jsx("span",{className:"text-sm text-gray-400",children:"-"})}},d=s=>{if(!l)return{gold:0,silver:0,bronze:0,total:0};const t=l.scores.filter(n=>n.participant_id===s),r=t.filter(n=>n.score===3).length,a=t.filter(n=>n.score===2).length,x=t.filter(n=>n.score===1).length;return{gold:r,silver:a,bronze:x,total:r+a+x}},j=()=>l?[...l.participants].sort((s,t)=>{const r=d(s.id),a=d(t.id);return a.gold!==r.gold?a.gold-r.gold:a.silver!==r.silver?a.silver-r.silver:a.bronze!==r.bronze?a.bronze-r.bronze:0}):[];return e.jsxs(u,{children:[e.jsx(f,{title:"Medal Tally"}),e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-8 gap-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-semibold text-gray-900",children:"Medal Tally"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Competition standings and results"})]})}),i.length===0?e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center",children:e.jsx("p",{className:"text-gray-500",children:"No medal tally available"})}):e.jsxs(e.Fragment,{children:[i.length>1&&e.jsx("div",{className:"mb-6",children:e.jsx("select",{value:l?.id||"",onChange:s=>o(i.find(t=>t.id===parseInt(s.target.value))),className:"block w-full max-w-md px-4 py-2 bg-white border border-gray-300 rounded-lg shadow-sm focus:ring-1 focus:ring-gray-400 focus:border-gray-400",children:i.map(s=>e.jsx("option",{value:s.id,children:s.tally_title},s.id))})}),l&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden mb-8",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:l.tally_title}),e.jsxs("p",{className:"text-gray-600 mt-1",children:[l.events.length," Competitions"]})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Overall Standings"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:j().map((s,t)=>{const r=d(s.id);return e.jsxs("div",{className:"bg-white rounded-lg p-5 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:s.participant_name}),t===0&&r.total>0&&e.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Rank 1"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("circle",{cx:"12",cy:"15",r:"6",fill:"#FFD700",stroke:"#6B7280",strokeWidth:"1.5"}),e.jsx("path",{d:"M9 9L7 2M15 9L17 2M7 2L9 2M17 2L15 2",stroke:"#6B7280",strokeWidth:"1.5",strokeLinecap:"round"})]}),e.jsx("span",{className:"text-sm text-gray-600",children:"Gold"})]}),e.jsx("span",{className:"text-lg font-semibold text-gray-900",children:r.gold})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("circle",{cx:"12",cy:"15",r:"6",fill:"#C0C0C0",stroke:"#6B7280",strokeWidth:"1.5"}),e.jsx("path",{d:"M9 9L7 2M15 9L17 2M7 2L9 2M17 2L15 2",stroke:"#6B7280",strokeWidth:"1.5",strokeLinecap:"round"})]}),e.jsx("span",{className:"text-sm text-gray-600",children:"Silver"})]}),e.jsx("span",{className:"text-lg font-semibold text-gray-900",children:r.silver})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("circle",{cx:"12",cy:"15",r:"6",fill:"#CD7F32",stroke:"#6B7280",strokeWidth:"1.5"}),e.jsx("path",{d:"M9 9L7 2M15 9L17 2M7 2L9 2M17 2L15 2",stroke:"#6B7280",strokeWidth:"1.5",strokeLinecap:"round"})]}),e.jsx("span",{className:"text-sm text-gray-600",children:"Bronze"})]}),e.jsx("span",{className:"text-lg font-semibold text-gray-900",children:r.bronze})]}),e.jsx("div",{className:"pt-3 mt-3 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Total"}),e.jsx("span",{className:"text-xl font-semibold text-gray-900",children:r.total})]})})]})]},s.id)})})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Competition Results"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Competition"}),l.participants.map(s=>e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase tracking-wider",children:s.participant_name},s.id))]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.events.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:s.event_name}),l.participants.map(t=>{const r=l.scores.find(a=>a.event_id===s.id&&a.participant_id===t.id);return e.jsx("td",{className:"px-6 py-4 text-center",children:p(r?.score)},t.id)})]},s.id))})]})})]})]})]})]})})]})}export{v as default};
