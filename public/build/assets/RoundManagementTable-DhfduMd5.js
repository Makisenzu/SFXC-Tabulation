import{r as c,j as e,b as k}from"./app-BFXxh3rB.js";import{c as L,s as m}from"./Sweetalert-qNsQQVcf.js";import{c as h,R as Re,C as _,F as Se}from"./refresh-cw-BGK5k01c.js";/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],ie=h("calendar",Ae);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Pe=h("check",Ee);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],R=h("chevron-right",$e);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ce=h("circle-alert",Me);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],de=h("database",De);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],xe=h("image",Fe);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],me=h("play",Te);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],he=h("plus",ze);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ue=h("trash-2",qe);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],S=h("user",He);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Ue=h("users",Le);function Je(){const[U,B]=c.useState([]),[V,Y]=c.useState([]),[A,Q]=c.useState([]),[E,y]=c.useState({}),[Be,pe]=c.useState(!0),[W,Ve]=c.useState(null),[ge,J]=c.useState(!1),[P,p]=c.useState(!1),[d,O]=c.useState(null),[$,M]=c.useState(new Set),[D,ye]=c.useState({}),[C,fe]=c.useState(!1);c.useEffect(()=>{(async()=>{pe(!0);const a=await fetch("/getEvents?per_page=100&show_past=true");if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);const n=await a.json(),r=await fetch("/getContestants");if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const o=await r.json();let t=n?.data&&Array.isArray(n.data)?n.data:Array.isArray(n)?n:n?.events||[];B(t);let i=Array.isArray(o)?o:o?.contestants||o?.data||[];Y(i);const u=t.map(x=>fetch(`/getActiveRounds/${x.id}`).then(w=>w.json())),q=await Promise.all(u),N={};t.forEach((x,w)=>{N[x.id]=q[w]}),Q(N),await G(t,N)})()},[]);const G=async(s,a)=>{try{const n={};for(const r of s){const o=a[r.id]||[];n[r.id]={};for(const t of o){const i=await fetch(`/get-round-contestants/${r.id}/${t.round_no}`);if(i.ok){const u=await i.json();n[r.id][t.round_no]=u}else n[r.id][t.round_no]=[]}}y(n)}catch(n){console.error("Error fetching round contestants:",n)}},b=Array.isArray(U)?U:[],K=Array.isArray(V)?V:[],j=c.useMemo(()=>{const s={};return K.forEach(a=>{const n=a.event_id;s[n]||(s[n]=[]),s[n].push(a)}),s},[K]),F=c.useMemo(()=>b.filter(s=>j[s.id]?.length>0),[b,j]),{currentEvents:T,pastEvents:v}=c.useMemo(()=>{const s=new Date;s.setHours(0,0,0,0);const a=[],n=[];return F.forEach(r=>{const o=new Date(r.event_start),t=new Date(r.event_end);o.setHours(0,0,0,0),t.setHours(0,0,0,0),o>=s||t>=s?a.push(r):n.push(r)}),{currentEvents:a,pastEvents:n}},[F]),X=s=>{const a=D[s];return a?(E[s]||{})[a]||[]:[]},Z=s=>{const a=new Set($);a.has(s)?a.delete(s):a.add(s),M(a)},I=async(s,a)=>{ye(n=>({...n,[s]:a})),a&&await z(s,a)},z=async(s,a)=>{try{const n=await fetch(`/get-round-contestants/${s}/${a}`);if(n.ok){const r=await n.json();y(o=>({...o,[s]:{...o[s],[a]:r}}))}}catch(n){console.error("Error refreshing round contestants:",n),te()}},be=()=>{const s=new Set([...T,...C?v:[]].map(a=>a.id));M(s)},je=()=>M(new Set),ee=s=>{O(s),J(!0)},se=()=>{J(!1),O(null)},te=async()=>{try{const s=await fetch("/getEvents?per_page=100&show_past=true"),a=await fetch("/getContestants");if(s.ok){const t=await s.json();let i=t?.data&&Array.isArray(t.data)?t.data:Array.isArray(t)?t:t?.events||[];B(i)}if(a.ok){const t=await a.json();let i=Array.isArray(t)?t:t?.contestants||t?.data||[];Y(i)}const n=b.map(t=>fetch(`/getActiveRounds/${t.id}`).then(i=>i.json())),r=await Promise.all(n),o={};b.forEach((t,i)=>{o[t.id]=r[i]}),Q(o),await G(b,o)}catch(s){console.error("Error refetching data:",s)}},ne=async(s,a)=>{if(await L("Set Active Round?",`This will set Round ${a} as the active round for this event.`,"Yes, set as active")){p(!0);try{k.patch(`/events/${s}/set-active-round`,{round_no:a},{onSuccess:()=>{m("success",`Round ${a} set as active!`),te()},onError:()=>m("error","Failed to set active round"),onFinish:()=>p(!1)})}catch(r){console.error("Error setting active round:",r),p(!1)}}},ae=async(s,a)=>{await L("Populate Tabulation Criteria?",`This will prepare Round ${a} for judging by showing contestants and criteria to judges.`,"Yes, populate for judges")&&(p(!0),k.post(`/events/${s}/populate-criteria`,{round_no:a},{preserveScroll:!0,onSuccess:r=>{if(r.props.success){const o=r.props.populatedData||r.props.data;o?m("success",`Tabulation ready for judges! 
                            ${o.summary.total_contestants} contestants and 
                            ${o.summary.total_criteria} criteria loaded for Round ${a}.`):m("success",r.props.message||"Tabulation criteria populated successfully!")}},onError:r=>{r.message?m("error",r.message):m("error","Failed to populate tabulation criteria")},onFinish:()=>p(!1)}))},ve=async(s,a,n)=>{if(!await L("Remove from Round?",`This will remove the contestant from Round ${a}. This action cannot be undone.`,"Yes, remove from round"))return;const o=E[n]?.[a]||[],t=o.filter(i=>i.id!==s);y(i=>({...i,[n]:{...i[n],[a]:t}})),k.delete(`/contestant-rounds/${s}`,{data:{round_no:a,event_id:n},preserveScroll:!0,onSuccess:()=>{m("success","Contestant removed from round successfully"),z(n,a)},onError:i=>{console.error("Delete error:",i),y(u=>({...u,[n]:{...u[n],[a]:o}})),m("error","Failed to remove contestant from round")}})},Ne=()=>{const[s,a]=c.useState(new Set),[n,r]=c.useState(""),[o,t]=c.useState("");if(!d)return null;const i=j[d.id]||[],u=A[d.id]||[],q=n?E[d.id]?.[n]||[]:[],N=new Set(q.map(l=>l.id)),x=i.filter(l=>!N.has(l.id)&&l.contestant_name.toLowerCase().includes(o.toLowerCase())),w=l=>{const f=new Set(s);f.has(l)?f.delete(l):f.add(l),a(f)},Ce=()=>{s.size===x.length?a(new Set):a(new Set(x.map(l=>l.id)))},ke=()=>{if(s.size===0){m("error","Please select at least one contestant");return}if(!n){m("error","Please select a round");return}p(!0);const l={contestant_ids:Array.from(s),round_no:n,event_id:d.id},f=x.filter(g=>s.has(g.id));y(g=>({...g,[d.id]:{...g[d.id],[n]:[...g[d.id]?.[n]||[],...f]}})),k.post("/contestant-rounds/bulk",l,{preserveScroll:!0,onSuccess:()=>{m("success",`${s.size} contestant(s) added to round successfully!`),z(d.id,n),se(),a(new Set),r("")},onError:g=>{console.error("Add contestants error:",g),y(H=>({...H,[d.id]:{...H[d.id],[n]:H[d.id]?.[n]?.filter(_e=>!s.has(_e.id))||[]}})),m("error","Failed to add contestants to round")},onFinish:()=>p(!1)})},le=()=>{se(),a(new Set),r(""),t("")};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center overflow-y-auto bg-black/50 backdrop-blur-sm",children:e.jsx("div",{className:"relative w-full max-w-3xl p-6 mx-auto",children:e.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl",children:[e.jsx("div",{className:"px-8 py-6 border-b border-gray-100",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-blue-50 rounded-xl",children:e.jsx(Ue,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Add Contestants to Round"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:d.event_name})]})]}),e.jsx("button",{onClick:le,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),e.jsxs("div",{className:"px-8 py-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Select Round"}),e.jsxs("select",{value:n,onChange:l=>{r(l.target.value),a(new Set)},className:"w-full px-4 py-3 bg-white border border-gray-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",required:!0,children:[e.jsx("option",{value:"",children:"Choose a round"}),u.map(l=>e.jsxs("option",{value:l.round_no,children:["Round ",l.round_no," ",l.is_active?"(Active)":""]},l.round_no))]})]}),n&&x.length>0&&e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search contestants...",value:o,onChange:l=>t(l.target.value),className:"w-full px-4 py-3 pl-10 bg-gray-50 border border-gray-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent focus:bg-white transition-all"}),e.jsx(Se,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Select Contestants"}),x.length>0&&e.jsx("button",{type:"button",onClick:Ce,className:"text-sm text-blue-600 hover:text-blue-700 font-medium transition-colors",children:s.size===x.length?"Deselect All":"Select All"})]}),e.jsx("div",{className:"border border-gray-200 rounded-xl overflow-hidden",children:e.jsx("div",{className:"max-h-96 overflow-y-auto",children:x.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n?e.jsx(ce,{className:"h-8 w-8 text-gray-400"}):e.jsx(S,{className:"h-8 w-8 text-gray-400"})}),e.jsx("p",{className:"text-gray-500 font-medium",children:n?o?"No contestants match your search":"No available contestants for this round":"Please select a round first"})]}):e.jsx("div",{className:"divide-y divide-gray-100",children:x.map(l=>e.jsxs("label",{className:"flex items-center px-5 py-4 hover:bg-blue-50 cursor-pointer transition-colors group",children:[e.jsx("input",{type:"checkbox",checked:s.has(l.id),onChange:()=>w(l.id),className:"h-5 w-5 text-blue-600 focus:ring-2 focus:ring-blue-500 border-gray-300 rounded transition-colors"}),e.jsxs("span",{className:"ml-4 text-sm font-medium text-gray-900 group-hover:text-blue-700 transition-colors",children:[l.contestant_name,l.sequence_no&&e.jsxs("span",{className:"ml-2 text-xs text-gray-500 font-normal",children:["No. ",l.sequence_no]})]})]},l.id))})})}),s.size>0&&e.jsx("div",{className:"mt-3 flex items-center gap-2",children:e.jsxs("div",{className:"px-3 py-1.5 bg-blue-50 text-blue-700 rounded-lg text-sm font-semibold",children:[s.size," Selected"]})})]})]}),e.jsxs("div",{className:"px-8 py-6 bg-gray-50 border-t border-gray-100 rounded-b-2xl flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:le,className:"px-6 py-3 border border-gray-300 rounded-xl text-sm font-semibold text-gray-700 hover:bg-white transition-colors",disabled:P,children:"Cancel"}),e.jsxs("button",{onClick:ke,disabled:P||s.size===0||!n,className:"px-6 py-3 bg-blue-600 text-white rounded-xl text-sm font-semibold hover:bg-blue-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl flex items-center gap-2",children:[e.jsx(Pe,{className:"w-4 h-4"}),P?"Adding...":`Add ${s.size} Contestant${s.size!==1?"s":""}`]})]})]})})})},re=(s,a=null)=>{if(a){const n=new Date;n.setHours(0,0,0,0);const r=new Date(a.event_start),o=new Date(a.event_end);if(r.setHours(0,0,0,0),o.setHours(0,0,0,0),r<n&&o<n)return e.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded-lg text-xs font-semibold bg-gray-100 text-gray-600",children:"Inactive"})}return s?e.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded-lg text-xs font-semibold bg-green-50 text-green-700",children:"Active"}):e.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded-lg text-xs font-semibold bg-gray-100 text-gray-600",children:"Inactive"})},oe=s=>{const n={Pageant:{color:"bg-pink-50 text-pink-700"},Singing:{color:"bg-indigo-50 text-indigo-700"},Dancing:{color:"bg-orange-50 text-orange-700"}}[s]||{color:"bg-gray-100 text-gray-600"};return e.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-lg text-xs font-semibold ${n.color}`,children:s?s.charAt(0).toUpperCase()+s.slice(1):"Unknown"})},we=s=>{if(s){const a=`/storage/${s}`;return e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:a,alt:"Contestant",className:"w-14 h-18 object-cover rounded-lg border border-gray-200 shadow-sm group-hover:shadow-md transition-shadow",onError:n=>{n.target.style.display="none",n.target.nextSibling.style.display="flex"}}),e.jsx("div",{className:"absolute inset-0 bg-black/5 opacity-0 group-hover:opacity-100 rounded-lg transition-opacity"})]})}return e.jsxs("div",{className:"w-14 h-18 rounded-lg bg-gray-100 border border-gray-200 flex flex-col items-center justify-center text-gray-400",children:[e.jsx(xe,{className:"w-5 h-5 mb-0.5"}),e.jsx("span",{className:"text-xs",children:"No Photo"})]})};return W?e.jsx("div",{className:"bg-white shadow-sm rounded-2xl overflow-hidden border border-gray-200",children:e.jsxs("div",{className:"p-16 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-red-50 rounded-2xl flex items-center justify-center mx-auto mb-4",children:e.jsx(ce,{className:"w-10 h-10 text-red-600"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Error Loading Data"}),e.jsx("p",{className:"text-gray-600 mb-6",children:W}),e.jsxs("button",{onClick:()=>window.location.reload(),className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-xl font-semibold hover:bg-blue-700 transition-colors shadow-lg",children:[e.jsx(Re,{className:"w-4 h-4"}),"Retry"]})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white shadow-sm rounded-2xl overflow-hidden border border-gray-200",children:[e.jsx("div",{className:"px-6 py-5 border-b border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-blue-50 rounded-xl"}),e.jsx("div",{})]}),e.jsx("div",{className:"flex items-center gap-2",children:F.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:be,className:"inline-flex items-center gap-2 px-4 py-2 border border-gray-200 rounded-xl text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors",children:[e.jsx(_,{className:"w-4 h-4"}),"Expand All"]}),e.jsxs("button",{onClick:je,className:"inline-flex items-center gap-2 px-4 py-2 border border-gray-200 rounded-xl text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors",children:[e.jsx(R,{className:"w-4 h-4"}),"Collapse All"]})]})})]})}),e.jsx("div",{className:"divide-y divide-gray-100",children:T.length===0&&v.length===0?e.jsxs("div",{className:"px-6 py-20 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-2xl flex items-center justify-center mx-auto mb-4",children:e.jsx(S,{className:"w-10 h-10 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Contestants Found"}),e.jsx("p",{className:"text-gray-500",children:"Add contestants to events to manage rounds"})]}):e.jsxs(e.Fragment,{children:[T.map(s=>{const a=A[s.id]||[],n=$.has(s.id),r=D[s.id],o=r?X(s.id):[];return e.jsxs("div",{children:[e.jsxs("div",{className:"px-6 py-4 hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>Z(s.id),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[e.jsx("div",{className:`p-2 rounded-lg transition-all ${n?"bg-blue-50":"bg-gray-100"}`,children:n?e.jsx(_,{className:"w-5 h-5 text-blue-600"}):e.jsx(R,{className:"w-5 h-5 text-gray-600"})}),e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[e.jsx("div",{className:"p-3 bg-green-100 rounded-xl"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-base font-semibold text-gray-900",children:s.event_name}),e.jsxs("div",{className:"text-sm text-gray-500 mt-0.5",children:[j[s.id]?.length||0," contestants registered"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[oe(s.event_type),re(s.is_active,s)]})]}),n&&e.jsx("div",{className:"mt-5 pt-5 border-t border-gray-100",onClick:t=>t.stopPropagation(),children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"text-sm font-semibold text-gray-700",children:"Round:"}),e.jsxs("select",{value:r||"",onChange:t=>{t.stopPropagation(),I(s.id,t.target.value)},onClick:t=>t.stopPropagation(),className:"px-4 py-2 bg-white border border-gray-200 rounded-xl text-sm font-medium focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[e.jsx("option",{value:"",children:"Select Round"}),a.map(t=>e.jsxs("option",{value:t.round_no,children:["Round ",t.round_no," ",t.is_active?"(Active)":""]},t.round_no))]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:t=>{t.stopPropagation(),ee(s)},className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-xl text-sm font-semibold hover:bg-blue-700 transition-colors shadow-sm",children:[e.jsx(he,{className:"w-4 h-4"}),"Add Contestants"]}),r&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:t=>{t.stopPropagation(),ne(s.id,r)},className:"inline-flex items-center gap-2 px-4 py-2 bg-green-50 text-green-700 rounded-xl text-sm font-semibold hover:bg-green-100 transition-colors",children:[e.jsx(me,{className:"w-4 h-4"}),"Set Active"]}),e.jsxs("button",{onClick:t=>{t.stopPropagation(),ae(s.id,r)},className:"inline-flex items-center gap-2 px-4 py-2 bg-purple-50 text-purple-700 rounded-xl text-sm font-semibold hover:bg-purple-100 transition-colors",children:[e.jsx(de,{className:"w-4 h-4"}),"Populate Criteria"]})]})]})]})})]}),n&&r&&e.jsx("div",{className:"bg-gray-50",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"No."}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Photo"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Contestant"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Round"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Action"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:o.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-6 py-12",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-2xl flex items-center justify-center mb-3",children:e.jsx(S,{className:"w-8 h-8 text-gray-400"})}),e.jsxs("p",{className:"text-sm font-medium text-gray-600",children:["No contestants in Round ",r]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Add contestants to this round to get started"})]})})}):o.map((t,i)=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:i+1})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:we(t.photo)}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:t.contestant_name}),t.sequence_no&&e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Sequence No. ",t.sequence_no]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded-lg text-xs font-semibold bg-blue-50 text-blue-700",children:["Round ",r]})}),e.jsx("td",{className:"px-6 py-4 text-right whitespace-nowrap",children:e.jsxs("button",{onClick:()=>ve(t.id,r,s.id),className:"inline-flex items-center gap-2 px-4 py-2 bg-red-50 text-red-700 rounded-lg text-sm font-semibold hover:bg-red-100 transition-colors",children:[e.jsx(ue,{className:"w-4 h-4"}),"Remove"]})})]},t.id))})]})})})]},s.id)}),v.length>0&&e.jsxs("div",{className:"border-t-4 border-gray-300",children:[e.jsxs("button",{onClick:()=>fe(!C),className:"w-full px-6 py-4 bg-gray-100 hover:bg-gray-200 flex items-center justify-between transition-colors",children:[e.jsxs("span",{className:"text-sm font-semibold text-gray-700 flex items-center gap-2",children:[e.jsx(ie,{className:"w-4 h-4"}),"Past Events (",v.length,")"]}),C?e.jsx(_,{className:"w-5 h-5 text-gray-600"}):e.jsx(R,{className:"w-5 h-5 text-gray-600"})]}),C&&e.jsx("div",{className:"divide-y divide-gray-100 bg-gray-50",children:v.map(s=>{const a=A[s.id]||[],n=$.has(s.id),r=D[s.id],o=r?X(s.id):[];return e.jsx("div",{className:"opacity-75",children:e.jsxs("div",{className:"px-6 py-4 hover:bg-gray-100 cursor-pointer transition-colors",onClick:()=>Z(s.id),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[e.jsx("div",{className:`p-2 rounded-lg transition-all ${n?"bg-gray-300":"bg-gray-200"}`,children:n?e.jsx(_,{className:"w-5 h-5 text-gray-600"}):e.jsx(R,{className:"w-5 h-5 text-gray-600"})}),e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[e.jsx("div",{className:"p-3 bg-gray-300 rounded-xl",children:e.jsx(ie,{className:"w-5 h-5 text-gray-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-base font-semibold text-gray-700",children:s.event_name}),e.jsxs("div",{className:"text-sm text-gray-500 mt-0.5",children:[j[s.id]?.length||0," contestants registered"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[oe(s.event_type),re(s.is_active)]})]}),n&&e.jsxs("div",{className:"mt-5 pt-5 border-t border-gray-200",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"text-sm font-semibold text-gray-700",children:"Round:"}),e.jsxs("select",{value:r||"",onChange:t=>{t.stopPropagation(),I(s.id,t.target.value)},onClick:t=>t.stopPropagation(),className:"px-4 py-2 bg-white border border-gray-200 rounded-xl text-sm font-medium focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[e.jsx("option",{value:"",children:"Select Round"}),a.map(t=>e.jsxs("option",{value:t.round_no,children:["Round ",t.round_no," ",t.is_active?"(Active)":""]},t.round_no))]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:t=>{t.stopPropagation(),ee(s)},className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-xl text-sm font-semibold hover:bg-blue-700 transition-colors shadow-sm",children:[e.jsx(he,{className:"w-4 h-4"}),"Add Contestants"]}),r&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:t=>{t.stopPropagation(),ne(s.id,r)},className:"inline-flex items-center gap-2 px-4 py-2 bg-green-50 text-green-700 rounded-xl text-sm font-semibold hover:bg-green-100 transition-colors",children:[e.jsx(me,{className:"w-4 h-4"}),"Set Active"]}),e.jsxs("button",{onClick:t=>{t.stopPropagation(),ae(s.id,r)},className:"inline-flex items-center gap-2 px-4 py-2 bg-purple-50 text-purple-700 rounded-xl text-sm font-semibold hover:bg-purple-100 transition-colors",children:[e.jsx(de,{className:"w-4 h-4"}),"Populate for Judges"]})]})]})]}),r&&e.jsxs("div",{className:"mt-6 bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"px-4 py-3 bg-gray-50 border-b border-gray-200",children:e.jsxs("h4",{className:"text-sm font-semibold text-gray-900",children:["Contestants in Round ",r,e.jsxs("span",{className:"ml-2 text-gray-500 font-normal",children:["(",o.length,")"]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sequence"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Photo"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contestant Name"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"px-4 py-12 text-center",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx(S,{className:"w-12 h-12 text-gray-300 mb-3"}),e.jsx("p",{className:"text-gray-500",children:"No contestants in this round"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:'Click "Add Contestants" to add contestants'})]})})}):o.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:"inline-flex items-center justify-center w-8 h-8 bg-blue-100 text-blue-700 rounded-full text-sm font-semibold",children:t.sequence_no})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:t.photo_path?e.jsx("img",{src:`/storage/${t.photo_path}`,alt:t.contestant_name,className:"h-12 w-12 rounded-full object-cover border-2 border-gray-200"}):e.jsx("div",{className:"h-12 w-12 rounded-full bg-gray-200 flex items-center justify-center",children:e.jsx(xe,{className:"h-6 w-6 text-gray-400"})})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:t.contestant_name})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-right",children:e.jsxs("button",{onClick:i=>{i.stopPropagation(),handleRemoveContestant(s.id,r,t.id)},className:"inline-flex items-center gap-2 px-3 py-2 bg-red-50 text-red-700 rounded-lg text-sm font-semibold hover:bg-red-100 transition-colors",children:[e.jsx(ue,{className:"w-4 h-4"}),"Remove"]})})]},t.id))})]})})]})]})]})},s.id)})})]})]})})]}),ge&&e.jsx(Ne,{})]})}export{Je as default};
