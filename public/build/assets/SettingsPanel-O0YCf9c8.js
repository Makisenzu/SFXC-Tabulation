import{r as t,a as x,j as e}from"./app-CIBWa0BM.js";import{n as N,k as v,r as w}from"./index-CgAFttlv.js";import{s as a}from"./Sweetalert-Dn1acibP.js";import"./iconBase-DGXcwxyl.js";function P(){const[m,g]=t.useState(null),[o,l]=t.useState(null),[n,i]=t.useState(null),[d,u]=t.useState(!1),[p,h]=t.useState(!0);t.useEffect(()=>{b()},[]);const b=async()=>{try{const r=await x.get("/api/settings/logo");g(r.data.logo)}catch(r){console.error("Error fetching logo:",r)}finally{h(!1)}},f=r=>{const s=r.target.files[0];if(s){if(!s.type.startsWith("image/")){a("error","Please select an image file");return}if(s.size>2*1024*1024){a("error","File size must be less than 2MB");return}l(s);const c=new FileReader;c.onloadend=()=>{i(c.result)},c.readAsDataURL(s)}},j=async()=>{if(!o){a("error","Please select a file first");return}u(!0);const r=new FormData;r.append("logo",o);try{const s=await x.post("/api/settings/logo",r,{headers:{"Content-Type":"multipart/form-data"}});a("success","Logo updated successfully"),g(s.data.logo),l(null),i(null),setTimeout(()=>{window.location.reload()},1500)}catch(s){console.error("Error uploading logo:",s),a("error",s.response?.data?.message||"Failed to upload logo")}finally{u(!1)}},y=()=>{l(null),i(null)};return e.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Event Logo for Printing"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Upload an event logo to be printed on results and cue cards (right side). The permanent SFXC logo will appear on the left. Recommended size: 200x200px (max 2MB)"})]}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Current Event Logo"}),e.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 flex items-center justify-center bg-gray-50",children:p?e.jsx("div",{className:"text-gray-400",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):m?e.jsx("img",{src:`/storage/${m}`,alt:"Current Logo",className:"max-h-32 max-w-full object-contain"}):e.jsxs("div",{className:"text-center text-gray-400",children:[e.jsx(N,{className:"w-12 h-12 mx-auto mb-2"}),e.jsx("p",{className:"text-sm",children:"No logo uploaded"})]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:n?"Preview":"Upload New Logo"}),e.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 flex items-center justify-center bg-gray-50",children:n?e.jsx("img",{src:n,alt:"Preview",className:"max-h-32 max-w-full object-contain"}):e.jsxs("label",{className:"cursor-pointer text-center",children:[e.jsx(v,{className:"w-12 h-12 mx-auto mb-2 text-gray-400"}),e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Click to upload"}),e.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG up to 2MB"}),e.jsx("input",{type:"file",accept:"image/*",onChange:f,className:"hidden"})]})}),o&&e.jsxs("div",{className:"mt-3",children:[e.jsxs("p",{className:"text-xs text-gray-600 mb-2",children:[e.jsx("strong",{children:"Selected:"})," ",o.name]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:j,disabled:d,className:"flex-1 inline-flex items-center justify-center px-4 py-2 bg-blue-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-blue-700 active:bg-blue-900 focus:outline-none focus:border-blue-900 focus:ring ring-blue-300 disabled:opacity-50 transition ease-in-out duration-150",children:d?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(w,{className:"mr-2"}),"Upload Logo"]})}),e.jsx("button",{onClick:y,disabled:d,className:"px-4 py-2 bg-gray-200 border border-transparent rounded-md font-semibold text-xs text-gray-700 uppercase tracking-widest hover:bg-gray-300 active:bg-gray-400 focus:outline-none focus:border-gray-400 focus:ring ring-gray-300 disabled:opacity-50 transition ease-in-out duration-150",children:"Cancel"})]})]})]})]})})]})}export{P as default};
