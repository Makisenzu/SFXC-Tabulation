import{r,j as e,H as u,a as x}from"./app-BBXihpFN.js";import{A as m}from"./AuthenticatedLayout-C-pLvtez.js";import"./ApplicationLogo-u6m9xnxg.js";import"./index-D6LaSXeZ.js";import"./transition-BxjH5DsP.js";import"./iconBase-BzYg38nK.js";import"./index-B93cBGD9.js";function v({auth:o}){const[n,i]=r.useState(!1),[s,a]=r.useState(null),[l,c]=r.useState({online_url:"https://sfxcresults.online",api_key:"l3rza+xd480MhO2Eh1EU8bRV7MGTNhJAeKJS+UK6yHM="}),d=async()=>{if(!l.online_url||!l.api_key){alert("Please enter both Online URL and API Key");return}if(confirm("Sync all data to online server? This will send all events, scores, and tallies.")){i(!0),a(null);try{const t=await x.post("/sync-to-online",l);a({success:!0,message:t.data.message,stats:t.data.stats}),localStorage.setItem("sync_config",JSON.stringify(l))}catch(t){a({success:!1,message:t.response?.data?.message||"Sync failed"})}finally{i(!1)}}};return r.useState(()=>{const t=localStorage.getItem("sync_config");t&&c(JSON.parse(t))},[]),e.jsxs(m,{user:o.user,children:[e.jsx(u,{title:"Sync Settings"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Sync to Online Server"}),e.jsx("p",{className:"text-gray-600",children:"Synchronize all local data (events, contestants, scores, tallies) to the online server"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Online Server URL"}),e.jsx("input",{type:"url",value:l.online_url,onChange:t=>c({...l,online_url:t.target.value}),placeholder:"https://your-online-server.com",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Enter the full URL of your online server"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"API Key"}),e.jsx("input",{type:"password",value:l.api_key,onChange:t=>c({...l,api_key:t.target.value}),placeholder:"Enter your API key",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Secure authentication key for the online server"})]}),e.jsx("div",{className:"pt-4",children:e.jsx("button",{onClick:d,disabled:n,className:`w-full px-6 py-4 rounded-lg text-white font-semibold text-lg transition-colors ${n?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"}`,children:n?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin h-5 w-5 mr-3",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Syncing..."]}):"Sync to Online Server"})}),s&&e.jsxs("div",{className:`p-4 rounded-lg ${s.success?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:[e.jsx("div",{className:`font-semibold mb-2 ${s.success?"text-green-800":"text-red-800"}`,children:s.success?"Sync Successful!":"Sync Failed"}),e.jsx("div",{className:`text-sm ${s.success?"text-green-700":"text-red-700"}`,children:s.message}),s.stats&&e.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{className:"text-green-700",children:["Events: ",s.stats.events]}),e.jsxs("div",{className:"text-green-700",children:["Contestants: ",s.stats.contestants]}),e.jsxs("div",{className:"text-green-700",children:["Tallies: ",s.stats.tallies]}),e.jsxs("div",{className:"text-green-700",children:["Scores: ",s.stats.scores]})]})]})]}),e.jsxs("div",{className:"mt-8 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"What will be synced?"}),e.jsxs("ul",{className:"space-y-1 text-sm text-blue-800",children:[e.jsx("li",{children:"• All events and their settings"}),e.jsx("li",{children:"• All contestants and participants"}),e.jsx("li",{children:"• Judge assignments and scores"}),e.jsx("li",{children:"• Medal tallies and results"}),e.jsx("li",{children:"• Criteria and rounds configuration"})]})]})]})})})]})}export{v as default};
